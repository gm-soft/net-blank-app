<app-page-header>
  <div class="app-page-header-label">
    Department <b>{{ departmentName }}</b>
  </div>
</app-page-header>

<div class="container mt-3" *ngIf="department != null">
  <div class="d-flex justify-content-between">
    <app-go-back-button></app-go-back-button>
    <div class="d-inline-block">
      <a
        routerLink="/admin/departments/{{ department.id }}"
        *appHasRole="'hrmanager'"
        class="btn btn-outline-secondary"
        title="Go to admin page"
        >Admin page</a
      >
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-body">
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <div>
            <div class="d-flex justify-content-between text-muted">
              <small>Manager</small>
            </div>
            <div>{{ hasManager ? managerName : 'No Manager' }}</div>
          </div>
        </li>
        <li class="list-group-item">
          <div>
            <div class="d-flex justify-content-between text-muted">
              <small>Short code</small>
            </div>
            <div>{{ department.shortCode }}</div>
          </div>
        </li>
        <li class="list-group-item">
          <div>
            <div class="d-flex justify-content-between text-muted">
              <small>Description</small>
            </div>
            <div>{{ department.description }}</div>
          </div>
        </li>
        <li class="list-group-item" *ngIf="department.parentDepartment != null">
          <div>
            <div class="d-flex justify-content-between text-muted">
              <small>Parent department</small>
            </div>
            <div>{{ department.parentDepartment?.shortCode }}</div>
          </div>
        </li>
        <li class="list-group-item" *ngIf="department.subDepartments.length > 0">
          <div>
            <div class="d-flex justify-content-between text-muted">
              <small>Sub-departments</small>
            </div>
            <div>{{ department.subDepartments.length }}</div>
          </div>
        </li>
      </ul>
    </div>
  </div>

  <div class="mt-5" *ngIf="employeesArguments != null">
    <app-department-employee [arguments]="employeesArguments"></app-department-employee>

    <div *appHasRole="'topmanager'" class="mt-2">
      <span>Department Salary Costs: </span
      ><span class="h5">{{ department.salariesCurrentCosts | number: '5.2-2' }}</span>
      <app-popover class="ml-1" [title]="'About the costs'" [icon]="'far fa-question-circle'">
        This is a sum of active salaries of the active department employees. Salaries of the inactive users are not
        involved.
      </app-popover>
    </div>
  </div>

  <div class="mt-5" *ngIf="requestFormArguments != null">
    <app-department-employee-request [arguments]="requestFormArguments"></app-department-employee-request>
  </div>
</div>
